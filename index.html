<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Enter your name to continue</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  body{font-family:Inter,system-ui,Arial;background:#071a2b;color:#fff;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;padding:20px}
  .card{width:100%;max-width:420px;background:rgba(255,255,255,0.02);padding:24px;border-radius:12px;text-align:center}
  input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff;margin-top:12px}
  button{margin-top:14px;padding:12px 18px;border-radius:10px;border:0;background:linear-gradient(90deg,#ff6b6b,#ffb86b);color:#081225;font-weight:600}
  .muted{color:#94a3b8;font-size:14px;margin-top:10px}
  .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.5);opacity:0;pointer-events:none;transition:opacity .15s}
  .overlay.show{opacity:1;pointer-events:auto}
  .toast{background:#071122;padding:16px 20px;border-radius:10px;border:1px solid rgba(255,255,255,0.04)}
</style>
</head>
<body>
  <div class="card" role="main">
    <h2>Enter your name to continue</h2>
    <p class="muted">We’ll redirect to Instagram after saving your name.</p>
    <input id="name" type="text" placeholder="Your name..." autocomplete="off" />
    <button id="next">Next</button>
    <p class="muted" style="font-size:12px;margin-top:8px">Names saved securely to my Firebase DB.</p>
  </div>

  <div id="overlay" class="overlay" aria-hidden="true"><div class="toast" id="toast">Saved — redirecting...</div></div>

  <!-- Firebase compat SDKs for Realtime Database (easy to use) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // FIREBASE CONFIG - auto-filled from your project (edit databaseURL below if your DB URL differs)
    const firebaseConfig = {
      apiKey: "AIzaSyAwp65e600OA0GWYsiNWdJJWLWKZKR1k14",
      authDomain: "profile-visit.firebaseapp.com",
      databaseURL: "https://profile-visit-default-rtdb.firebaseio.com",
      projectId: "profile-visit",
      storageBucket: "profile-visit.firebasestorage.app",
      messagingSenderId: "543914214110",
      appId: "1:543914214110:web:de5b692b5d62edb781384f",
      measurementId: "G-08X8DZ2P1X"
    };

    // initialize
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const REDIRECT = "https://www.instagram.com/abhin_av._/";

    function showOverlay(text){
      document.getElementById('toast').textContent = text;
      const o = document.getElementById('overlay');
      o.classList.add('show');
      o.setAttribute('aria-hidden','false');
    }

    document.getElementById('next').addEventListener('click', async function(){
      const name = document.getElementById('name').value.trim();
      if(!name){ alert('Please enter your name'); return; }

      const entry = {
        name: name,
        ts: (new Date()).toISOString(),
        ua: navigator.userAgent || null,
        ref: location.href
      };

      try {
        await db.ref('visitors').push(entry);
        showOverlay('Saved — redirecting...');
      } catch (err) {
        console.error('Save failed', err);
        showOverlay('Save failed — check connectivity');
      }

      setTimeout(()=> { window.location.href = REDIRECT; }, 900);
    });

    window.addEventListener('load', ()=> { document.getElementById('name').focus(); });
  </script>
</body>
</html>